{"ast":null,"code":"import _slicedToArray from\"D:/Dev/project/chill-sound/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import'./MusicPlayerCard.scss';import audios from\"../Song/Song\";import{AiFillPauseCircle,AiFillPlayCircle,BiSkipNext,BiSkipPrevious,FaRandom,FiRepeat}from\"react-icons/all\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MusicPlayerCard=function MusicPlayerCard(){var _useState=useState(audios),_useState2=_slicedToArray(_useState,1),song=_useState2[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),index=_useState4[0],setIndex=_useState4[1];function calTimer(time){var min=Math.floor(time/60);var sec=Math.round(time%60);if(sec<10)sec='0'+sec;return\"\".concat(min,\":\").concat(sec);}var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),currentTime=_useState6[0],setCurrentTime=_useState6[1];var intervalRef=useRef();var _useState7=useState('0:00'),_useState8=_slicedToArray(_useState7,2),changeTime=_useState8[0],setChangeTime=_useState8[1];var _useState9=useState([calTimer(0),0]),_useState10=_slicedToArray(_useState9,2),lengthTime=_useState10[0],setLenghTime=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isPlay=_useState12[0],setIsPlay=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isRepeat=_useState14[0],setIsRepeat=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isRandom=_useState16[0],setIsRandom=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),width=_useState18[0],setWidth=_useState18[1];var style={width:\"\".concat(width,\"%\")};var clickedStyle={color:'#ef1e21'};var notClickedStyle={color:'#cccccc'};var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),audio=_useState20[0],setAudio=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),songID=_useState22[0],setSongID=_useState22[1];function clickCard(numb){setCurrentTime(0);setSongID(document.getElementById(\"song_\".concat(index)));if(index!==numb){setIndex(numb);setAudio(new Audio(song[numb].src));if(audio!=undefined){stop();}}else{if(audio!=undefined){audio.load();audio.play();}}}// change song\nfunction play(){setCurrentTime(audio.currentTime);intervalRef.current=setInterval(creaseNum,1000);audio.play();}function stop(){audio.currentTime=0;audio.pause();}function pause(){clearInterval(intervalRef.current);audio.pause();}function skipnext(){if(isPlay){if(!isRandom){if(index<11)clickCard(index+1);}else clickCard(Math.floor(Math.random()*11));}}function skipprev(){if(isPlay){if(!isRandom){if(index>0)clickCard(index-1);}else clickCard(Math.floor(Math.random()*11));}}function playclick(){if(index.length!=0){setIsPlay(!isPlay);play();}else{clickCard(Math.floor(Math.random()*11));}}function pauseclick(){if(index.length!=0){setIsPlay(!isPlay);pause();}}var creaseNum=function creaseNum(){return setCurrentTime(function(currentTime){return currentTime+1;});};useEffect(function(){intervalRef.current=setInterval(creaseNum,1000);return function(){return clearInterval(intervalRef.current);};},[]);function slide(e){if(isPlay){if(audio!=undefined){audio.pause();clearInterval(intervalRef.current);setCurrentTime(e.target.value);audio.currentTime=e.target.value;play();}}}useEffect(function(){if(isPlay==true){setWidth(currentTime/lengthTime[1]*100);if(currentTime>lengthTime[1]){if(!isRandom&&!isRepeat)if(index<12)clickCard(index+1);if(isRandom)clickCard(Math.floor(Math.random()*11));if(isRepeat)clickCard(index);}else{console.log(currentTime);}}},[currentTime]);useEffect(function(){if(audio!=undefined){audio.load();audio.play();setIsPlay(true);}},[index]);useEffect(function(){if(audio!=undefined){if(songID!=null||songID!=undefined){document.getElementById(\"song_\".concat(index)).scrollIntoView({behavior:'smooth',block:'center'});}audio.onloadedmetadata=function(){setCurrentTime(0);setLenghTime([calTimer(audio.duration),audio.duration]);};}},[audio]);useEffect(function(){if(isRandom==true)setIsRepeat(false);},[isRandom]);useEffect(function(){if(isRepeat==true)setIsRandom(false);},[isRepeat]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"songs-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:song.map(function(item,numb){return/*#__PURE__*/_jsx(\"div\",{className:\"col s12 m6 l4 x3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(index)==\"\".concat(numb)?\"playing-song song \":\"song\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"song-image\",style:{backgroundImage:\"url(\".concat(item.img,\")\")}}),/*#__PURE__*/_jsxs(\"div\",{className:\"song-info\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"song_\".concat(numb),onClick:function onClick(){clickCard(numb);},className:\"song-title\",children:item.title}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){clickCard(numb);},className:\"song-artist\",children:item.author})]})]})});})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"music-controller\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"red-line\",style:style}),/*#__PURE__*/_jsx(\"div\",{className:\"ranger-slider\",children:/*#__PURE__*/_jsx(\"input\",{onMouseUp:function onMouseUp(e){slide(e);},onBlur:function onBlur(e){e.target.defaultValue=currentTime;},type:\"range\",min:\"0\",max:lengthTime[1],className:\"slider\",id:\"myRange\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"timer flex justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"timer-current\",children:\"\".concat(index)?\"\".concat(calTimer(currentTime)):\"0:00\"}),/*#__PURE__*/_jsx(\"div\",{className:\"current-song \",children:\"\".concat(index)?\"\".concat(song[index].title):\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"timer-length\",children:\"\".concat(index)?\"\".concat(lengthTime[0]):\"0:00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"play-controller flex justify-center\",children:[/*#__PURE__*/_jsx(BiSkipPrevious,{onClick:function onClick(){return skipprev();},className:\"skip-btn prev-btn bottom-2 text-5xl flex-initial\"}),isPlay==false?/*#__PURE__*/_jsx(AiFillPlayCircle,{onClick:function onClick(){return playclick();},className:\"  play-btn    text-5xl flex-initial\"}):/*#__PURE__*/_jsx(AiFillPauseCircle,{onClick:function onClick(){return pauseclick();},className:\"  play-btn    text-5xl flex-initial\"}),/*#__PURE__*/_jsx(BiSkipNext,{onClick:function onClick(){return skipnext();},className:\"skip-btn next-btn text-5xl flex-initial\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"other-btn my-auto text-xl flex justify-center\",children:[/*#__PURE__*/_jsx(FaRandom,{onClick:function onClick(){return setIsRandom(!isRandom);},className:\"random-btn  m-2 \",style:isRandom?clickedStyle:notClickedStyle}),/*#__PURE__*/_jsx(FiRepeat,{onClick:function onClick(){return setIsRepeat(!isRepeat);},className:\"repeat-btn  m-2  \",style:isRepeat?clickedStyle:notClickedStyle})]})]})]});};export default MusicPlayerCard;","map":{"version":3,"sources":["D:/Dev/project/chill-sound/src/components/playing_card/MusicPlayerCard.js"],"names":["React","useState","useEffect","useRef","audios","AiFillPauseCircle","AiFillPlayCircle","BiSkipNext","BiSkipPrevious","FaRandom","FiRepeat","MusicPlayerCard","song","index","setIndex","calTimer","time","min","Math","floor","sec","round","currentTime","setCurrentTime","intervalRef","changeTime","setChangeTime","lengthTime","setLenghTime","isPlay","setIsPlay","isRepeat","setIsRepeat","isRandom","setIsRandom","width","setWidth","style","clickedStyle","color","notClickedStyle","audio","setAudio","songID","setSongID","clickCard","numb","document","getElementById","Audio","src","undefined","stop","load","play","current","setInterval","creaseNum","pause","clearInterval","skipnext","random","skipprev","playclick","length","pauseclick","slide","e","target","value","console","log","scrollIntoView","behavior","block","onloadedmetadata","duration","map","item","backgroundImage","img","title","author","defaultValue"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useRef} from 'react'\r\nimport './MusicPlayerCard.scss'\r\nimport audios from \"../Song/Song\";\r\nimport {AiFillPauseCircle, AiFillPlayCircle, BiSkipNext, BiSkipPrevious, FaRandom, FiRepeat} from \"react-icons/all\";\r\nconst MusicPlayerCard =()=>{\r\n    const [song]=useState(audios)\r\n    const [index,setIndex]=useState([]);\r\n    function calTimer(time){\r\n        let min=Math.floor(time/60)\r\n        let sec=Math.round(time%60)\r\n        if(sec<10) sec='0'+sec\r\n        return `${min}:${sec}`\r\n\r\n    }\r\n    const[currentTime, setCurrentTime]=useState(0);\r\n    const intervalRef=useRef()\r\n    const [changeTime,setChangeTime]=useState('0:00');\r\n    const [lengthTime,setLenghTime]=useState([calTimer(0),0]);\r\n    const [isPlay,setIsPlay]=useState(false)\r\n    const[isRepeat,setIsRepeat]=useState(false)\r\n    const[isRandom,setIsRandom]=useState(false)\r\n    const[width,setWidth]=useState(0)\r\n    let style={\r\n        width: `${width}%`\r\n    }\r\n    let clickedStyle={color:'#ef1e21'}\r\n    let notClickedStyle={color:'#cccccc'}\r\n    const [audio,setAudio]=useState()\r\n    const [songID,setSongID]=useState()\r\n    function clickCard(numb) {\r\n        setCurrentTime(0)\r\n        setSongID(document.getElementById(`song_${index}`))\r\n        if (index!==numb){\r\n            setIndex(numb);\r\n            setAudio(new Audio(song[numb].src))\r\n            if (audio!=undefined) {\r\n                stop()\r\n            }\r\n        }\r\n        else {\r\n            if (audio!=undefined){\r\n                audio.load()\r\n                audio.play()\r\n            }\r\n        }\r\n    }     // change song\r\n    function play(){\r\n        setCurrentTime( audio.currentTime)\r\n        intervalRef.current = setInterval(creaseNum, 1000);\r\n        audio.play()\r\n    }\r\n    function stop() {\r\n        audio.currentTime=0\r\n        audio.pause()\r\n    }\r\n    function pause(){\r\n        clearInterval(intervalRef.current)\r\n        audio.pause()\r\n    }\r\n    function skipnext(){\r\n        if(isPlay){\r\n            if(!isRandom){\r\n                if (index<11)clickCard(index+1)\r\n            }\r\n            else clickCard(Math.floor(Math.random()*11))\r\n        }\r\n    }\r\n    function skipprev(){\r\n        if(isPlay){\r\n            if(!isRandom){\r\n                if (index>0 ) clickCard(index-1)\r\n            }\r\n            else clickCard(Math.floor(Math.random()*11))\r\n        }\r\n    }\r\n    function playclick(){\r\n        if(index.length!=0){setIsPlay(!isPlay);play()}\r\n        else {\r\n            clickCard(Math.floor(Math.random()*11))\r\n        }\r\n    }\r\n    function pauseclick(){\r\n        if (index.length!=0){setIsPlay(!isPlay);pause();}\r\n    }\r\n    const creaseNum=()=>setCurrentTime(currentTime=>currentTime+1)\r\n    useEffect(()=>{\r\n        intervalRef.current=setInterval(creaseNum,1000)\r\n        return () => clearInterval(intervalRef.current);\r\n    },[])\r\n    function slide(e){\r\n        if(isPlay){\r\n            if(audio!=undefined){\r\n                audio.pause()\r\n                clearInterval(intervalRef.current)\r\n                setCurrentTime(e.target.value)\r\n                audio.currentTime=e.target.value\r\n                play()\r\n            }\r\n        }\r\n    }\r\n    useEffect(\r\n        ()=>{\r\n            if(isPlay==true){\r\n                setWidth(currentTime/lengthTime[1]*100)\r\n                if (currentTime>lengthTime[1]){\r\n                    if(!isRandom && !isRepeat) if(index<12) clickCard(index+1)\r\n                    if(isRandom) clickCard(Math.floor(Math.random()*11))\r\n                    if(isRepeat) clickCard(index)\r\n\r\n                }\r\n                else {\r\n                        console.log(currentTime)\r\n                    }\r\n            }\r\n        },[currentTime]\r\n    )\r\n    useEffect(\r\n        ()=>{\r\n            if (audio!=undefined){\r\n                audio.load()\r\n                audio.play();\r\n                setIsPlay(true);\r\n                }\r\n        }\r\n    ,[index])\r\n    useEffect(\r\n        ()=>{if (audio!=undefined) {\r\n            if(songID!=null || songID!=undefined){\r\n                document.getElementById(`song_${index}`).scrollIntoView({behavior:'smooth',block:'center'})\r\n            }\r\n            audio.onloadedmetadata= function () {\r\n                setCurrentTime(0)\r\n                setLenghTime([calTimer(audio.duration),audio.duration])}\r\n        }}\r\n    ,[audio])\r\n    useEffect(\r\n        ()=>{\r\n            if(isRandom==true) setIsRepeat(false)\r\n        },[isRandom]\r\n    )\r\n    useEffect(\r\n        ()=>{\r\n            if(isRepeat==true) setIsRandom(false)\r\n        },[isRepeat]\r\n    )\r\n\r\n    return(\r\n        <div>\r\n            <div className=\"card\">\r\n                <div className=\"songs-wrapper\">\r\n                    <div className=\"row\">\r\n                        {song.map((item,numb)=>\r\n                            <div className=\"col s12 m6 l4 x3\">\r\n                                <div className={`${index}`==`${numb}`?`playing-song song `:`song`}>\r\n                                    <div className=\"song-image\" style={{backgroundImage:`url(${item.img})`}}></div>\r\n                                    <div className=\"song-info\">\r\n                                        <div id={`song_${numb}`} onClick={()=>{clickCard(numb)}} className=\"song-title\">{item.title}</div>\r\n                                        <div onClick={()=>{clickCard(numb)}} className=\"song-artist\">{item.author}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='music-controller'>\r\n                <div className='red-line' style={style}></div>\r\n                <div className='ranger-slider'>\r\n                    <input\r\n                            onMouseUp={(e)=>{slide(e)}}\r\n                            onBlur={(e)=>{e.target.defaultValue=currentTime}}\r\n                          type=\"range\" min='0' max={lengthTime[1]}  className=\"slider\" id=\"myRange\"/>\r\n                </div>\r\n                <div className='timer flex justify-center'>\r\n                    <div className='timer-current'>{`${index}`?`${calTimer(currentTime)}`:`0:00`}</div>\r\n                    <div className='current-song '>{`${index}`?`${song[index].title}`:``}</div>\r\n                    <div className=\"timer-length\">{`${index}`?`${lengthTime[0]}`:`0:00`}</div>\r\n                </div>\r\n                <div className='play-controller flex justify-center'>\r\n                    <BiSkipPrevious onClick={()=>skipprev()}  className='skip-btn prev-btn bottom-2 text-5xl flex-initial' />\r\n                    {isPlay==false\r\n                        ? <AiFillPlayCircle onClick={()=>playclick()} className='  play-btn    text-5xl flex-initial'/>\r\n                        : <AiFillPauseCircle onClick={()=>pauseclick()} className='  play-btn    text-5xl flex-initial'/>}\r\n                    <BiSkipNext onClick={()=>skipnext()} className='skip-btn next-btn text-5xl flex-initial' />\r\n                </div>\r\n                <div className='other-btn my-auto text-xl flex justify-center'>\r\n                    <FaRandom onClick={()=>setIsRandom(!isRandom)} className='random-btn  m-2 ' style={isRandom  ?  clickedStyle : notClickedStyle}/>\r\n                    <FiRepeat onClick={()=>setIsRepeat(!isRepeat)} className='repeat-btn  m-2  ' style={isRepeat ? clickedStyle : notClickedStyle}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default MusicPlayerCard"]},"metadata":{},"sourceType":"module"}